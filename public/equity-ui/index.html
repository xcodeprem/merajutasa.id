<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>H1 Equity Dashboard (Minimal)</title>
  <style>
    body{ font-family: system-ui, Arial, sans-serif; margin: 20px; }
    .badge{ display:inline-block; padding: 4px 8px; border-radius: 6px; background: #eef; color:#223; margin-right: 8px; }
    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    pre{ background:#f7f7f7; padding:10px; border-radius:6px; overflow:auto; }
  .card{ border:1px solid #eee; border-radius:8px; padding:12px; background:#fff; }
  .muted{ color:#666; font-size:12px; }
  </style>
</head>
<body>
  <h1>H1 Equity Dashboard (Minimal)</h1>
  <p style="margin-top:-8px">
  <a href="ui/methodology" target="_blank" rel="noopener"><span id="link-methodology">Methodology: Hysteresis & Under-Served</span></a>
  <span style="margin-left:8px"><a href="ui/privacy-faq" target="_blank" rel="noopener"><span id="link-privacy">Privacy FAQ</span></a></span>
  </p>
  <p style="font-size:12px;color:#666;margin-top:-8px">
    Note: On GitHub Pages, data loads from <code>data/*.json</code> snapshots.
  <span style="margin-left:8px"><a href="snapshots.html" id="link-snapshots">Snapshots index</a></span>
  </p>
  <div id="kpi">
    <span class="badge" id="fairness">fairness: …</span>
  <span class="badge" id="under" title="Units currently in ACTIVE/STALLED per hysteresis">under-served: …</span>
    <span class="badge" id="anoms">anomalies: …</span>
  <span class="badge" id="revoc">revocations: 0</span>
  </div>
  <div id="updated" style="font-size:12px;color:#666;margin-top:6px">Last updated: …</div>

  <div class="grid" style="margin-top:16px;">
    <div>
  <h3><span id="heading-under">Under-served</span></h3>
      <pre id="under-json">loading…</pre>
    </div>
    <div>
  <h3><span id="heading-kpi">KPI Summary</span></h3>
      <pre id="kpi-json">loading…</pre>
    </div>
  </div>

  <div style="margin-top:16px;">
  <h3><span id="heading-weekly">Weekly Trends</span></h3>
    <pre id="weekly-json">loading…</pre>
  <div id="decision-mix" style="margin-top:8px"></div>
  <div id="decision-spark" style="margin-top:8px"></div>
  </div>

  <div style="margin-top:16px;">
  <h3><span id="heading-monthly">Monthly Feedback (dry run)</span></h3>
    <pre id="monthly-json">loading…</pre>
  <div id="monthly-summary" class="card" style="margin-top:8px; display:none"></div>
  </div>

  <div style="margin-top:16px;">
    <h3>Risk Digest</h3>
    <div id="risk-card" class="card" style="display:none"></div>
  </div>

  <script>
    // Minimal i18n heading/link wiring before app.js renders content
    (async function(){
      try{
        const params = new URLSearchParams(location.search);
        const lang = (params.get('lang')||'id').toLowerCase();
        const base = await fetch('ui/i18n/id.json').then(r=>r.json()).catch(()=>({}));
        const override = lang==='id' ? {} : await fetch(`ui/i18n/${lang}.json`).then(r=>r.json()).catch(()=>({}));
        const t = { ...base, ...override };
        function set(id,key){ const el = document.getElementById(id); if (el && t[key]) el.textContent = t[key]; }
        set('heading-under','heading.under');
        set('heading-kpi','heading.kpi');
        set('heading-weekly','heading.weekly');
        set('heading-monthly','heading.monthly');
        set('link-methodology','link.methodology');
        set('link-privacy','link.privacy');
        set('link-snapshots','snapshots.index');
      } catch {}
    })();
  </script>
  <script src="app.js" defer></script>
</body>
</html>
