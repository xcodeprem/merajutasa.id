{
  "name": "merajutasa-governance",
  "version": "0.1.2",
  "type": "module",
  "private": true,
  "description": "Governance & integrity tooling (hash sealing, lint, fairness) for merajutasa.id",
  "license": "UNLICENSED",
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=8.0.0"
  },
  "packageManager": "npm@9.8.1",
  "scripts": {
    "lint": "npm run lint:md && npm run lint:dec",
    "test": "npm run test:governance && npm run test:services",
    "format": "echo 'Formatting tools not configured - using markdownlint for markdown'",
    "governance:check": "npm run governance:verify && ./.github/scripts/check-actions-pinning.sh && npm run schema:validate && node tools/validate-policy.js",
    "governance:verify": "node tools/governance-verify.js",
    "spec-hash:verify": "node tools/spec-hash-diff.js --mode=verify",
    "spec-hash:seal": "node tools/spec-hash-diff.js --mode=seal-first",
    "spec-hash:auto-seal-readme": "node tools/spec-hash-diff.js --mode=accept --include=README.md",
    "lint:md": "markdownlint-cli2 \"**/*.md\"",
    "service:signer": "node tools/services/signer.js",
    "service:chain": "node tools/services/chain.js",
    "service:collector": "node tools/services/collector.js",
    "service:revocation": "node tools/services/revocation.js",
    "service:equity": "node tools/services/equity.js",
    "chain:append:spec-hash": "node tools/chain-append-spec-hash.js",
    "lint:disclaimers": "node tools/disclaimers-lint.js",
    "privacy:scan": "node tools/pii-scan.js --sarif",
    "privacy:metrics": "node tools/pii-metrics.js",
    "privacy:asserts": "node tools/privacy-asserts.js",
    "gen:test-vectors": "node tools/generate-test-vectors.js",
    "test:integrity": "node tools/tests/run-basic-integrity-tests.js",
    "fairness:generate-snapshots": "node tools/fairness/generate-equity-snapshots.js",
    "fairness:hysteresis-run": "node tools/fairness/hysteresis-engine.js",
    "fairness:sim": "node tools/fairness-sim.js",
    "fairness:engine": "node tools/fairness-engine-runtime.js",
    "test:fairness-unit": "node tools/tests/fairness-engine-unit-tests.js",
    "phase:tracker": "node tools/generate-phase-tracker.js",
    "phase:H1": "powershell -c \"$env:FORCE_PHASE='PHASE_1_ERROR'; node tools/generate-phase-tracker.js\"",
    "snapshot:artifacts": "node tools/snapshot-artifacts-baseline.js",
    "evidence:validate": "node tools/validate-evidence.js",
    "evidence:bundle": "node tools/evidence-bundle.js",
    "evidence:collision": "node tools/evidence-collision-test.js",
    "param:integrity": "node tools/param-integrity.js",
    "agent:trend": "node tools/agent-trend-summary.js",
    "pr:labels": "node tools/pr-label-advisor.js",
    "baseline:snapshot": "node tools/snapshot-governance-baseline.js",
    "fairness:metrics": "node tools/fairness/fairness-metrics.js",
    "param:lock": "node tools/param-lock-verify.js",
    "governed:scan": "node tools/governed-change-scan.js",
    "dec:index": "node tools/generate-dec-index.js",
    "lint:dec": "node tools/dec-lint.js",
    "test:dec-hash": "node tools/tests/dec-canonical-hash-equivalence.test.js",
    "test:governance": "node tools/tests/policy-aggregation-threshold.test.js && node tools/tests/feedback-categories-ingestion.test.js && node tools/tests/evidence-bundle-prefix.test.js && node tools/tests/dec-canonical-hash-equivalence.test.js && node tools/tests/governance-verify.test.js && node tools/tests/spec-hash-diff.test.js && node tools/tests/param-integrity.test.js && node tools/tests/gap-analysis.test.js && node tools/tests/dec-lint.test.js && node tools/tests/json-stable.test.js && node tools/tests/check-actions-pinning.test.js",
    "test:services": "node tools/tests/services-integration.test.js && node tools/tests/privacy-tools.test.js && node tools/tests/evidence-validation.test.js && node tools/tests/lint-tools.test.js && node tools/tests/events-processing.test.js",
    "test:all": "npm run test:governance && npm run test:services && npm run test:pii",
    "test:pii": "node tools/tests/pii-scan.test.js",
    "events:meta": "node tools/event-meta-validate.js",
    "events:validate": "node tools/event-validate.js --file data/events-sample.ndjson --rehash",
    "policy:index:verify": "node tools/policy-index-verify.js",
    "transparency:changelog": "node tools/changelog-excerpt-generate.js",
    "risk:digest": "node tools/risk-digest.js",
    "events:anchor": "node tools/event-anchor-chain.js",
    "events:pipeline:hash": "node tools/event-pipeline-hash.js",
    "feedback:smoke": "node tools/feedback-smoke.js",
    "collector:reliability": "node tools/collector-reliability-smoke.js",
    "test:collector": "node tools/tests/collector-integration.test.js",
    "test:revocation-smoke": "node tools/tests/revocation-smoke.test.js",
    "test:equity-smoke": "node tools/tests/equity-smoke.test.js",
    "test:equity-ui-smoke": "node tools/tests/equity-ui-smoke.test.js",
    "test:events-pipeline-hash": "node tools/tests/event-pipeline-hash.test.js",
    "test:event-taxonomy": "node tools/tests/event-taxonomy-consistency.test.js",
    "ci:governance-with-collector": "powershell -c \"$job=Start-Job -ScriptBlock { node tools/services/collector.js }; Start-Sleep -Seconds 1; node tools/governance-verify.js; Get-Job | Remove-Job -Force\"",
    "test:signer-e2e": "powershell -c \"$job=Start-Job -ScriptBlock { node tools/services/signer.js }; Start-Sleep -Seconds 1; node tools/tests/signer-verify-e2e.test.js; Get-Job | Remove-Job -Force\"",
    "test:chain-verify-negative": "powershell -c \"$job=Start-Job -ScriptBlock { node tools/services/chain.js }; Start-Sleep -Seconds 1; node tools/tests/chain-prevhash-negative.test.js; Get-Job | Remove-Job -Force\"",
    "equity:snapshot": "node tools/fairness/generate-equity-snapshots.js",
    "equity:anomaly": "node tools/equity-anomaly-detector.js",
    "equity:under-served": "node tools/derive-under-served-list.js",
    "h1:kpi": "node tools/generate-h1-kpi-summary.js",
    "h1:guard": "node tools/h1-verify-guard.js",
    "kpi:weekly": "node tools/weekly-trend-aggregator.js",
    "feedback:monthly": "node tools/monthly-feedback-rollup.js",
    "terms:adoption": "node tools/terminology-adoption.js",
    "terms:trend": "node tools/terminology-adoption-trend.js",
    "perf:budget": "node tools/perf-budget-smoke.js",
    "a11y:smoke": "node tools/a11y-smoke.js",
    "changelog:presence": "node tools/changelog-presence-check.js",
    "equity:annotate": "node tools/equity-anomaly-annotate.js",
    "gate:1": "node tools/gate1-verify.js",
    "gate:2": "node tools/gate2-verify.js",
    "gate:3": "node tools/gate3-verify.js",
    "pipeline:credential": "node tools/pipeline-runner.js",
    "chain:reset:dev": "node tools/chain-reset-dev.js",
    "monitor:chain": "node tools/chain-monitor.js",
    "collector:smoke": "powershell -c \"$e=@{event_name='pub_hero_view';occurred_at=(Get-Date).ToString('s')+'Z';received_at=(Get-Date).ToString('s')+'Z';meta=@{path='/'}}; $json=$e|ConvertTo-Json -Depth 5; Invoke-RestMethod -Method Post -Uri http://127.0.0.1:4603/ingest -ContentType 'application/json' -Body $json\"",
    "signer:rotate": "curl -s -X POST http://127.0.0.1:%SIGNER_PORT%/rotate || powershell -c \"Invoke-RestMethod -Method Post -Uri http://127.0.0.1:$env:SIGNER_PORT/rotate\"",
    "verify:cli": "node tools/generate-test-vectors.js",
    "chain:append": "powershell -c \"$s=Start-Job -ScriptBlock { node tools/services/signer.js }; $c=Start-Job -ScriptBlock { node tools/services/chain.js }; Start-Sleep -Seconds 1; node tools/chain-append-from-signer.js; Get-Job | Remove-Job -Force\"",
    "chain:verify:negative": "powershell -c \"$c=Start-Job -ScriptBlock { node tools/services/chain.js }; Start-Sleep -Seconds 1; node tools/tests/chain-prevhash-negative.test.js; Get-Job | Remove-Job -Force\"",
    "policy:aggregation:verify": "node tools/policy-aggregation-threshold-verify.js",
    "policy:aggregation:enforce:allow": "node tools/policy-aggregation-threshold-enforce.js artifacts/aggregation-cells-allow.json",
    "policy:aggregation:enforce:deny": "node tools/policy-aggregation-threshold-enforce.js artifacts/aggregation-cells-deny.json",
    "queries:seeds": "node tools/query-seeds.js",
    "events:seed": "node tools/seed-events.js",
    "doc:verify-cli:stub": "node tools/write-verify-cli-stub.js",
    "schema:validate": "node tools/schema-validate.js",
    "hero:prerender": "node tools/hero-prerender.js",
    "h0:content": "npm run hero:prerender && npm run doc:verify-cli:stub",
    "dec:new": "node tools/dec-template-create.cjs"
  },
  "devDependencies": {
    "ajv": "^8.17.1",
    "ajv-formats": "^3.0.1",
    "chrome-launcher": "^1.0.0",
    "glob": "^11.0.3",
    "lighthouse": "^12.0.0",
    "markdownlint": "^0.38.0",
    "markdownlint-cli2": "^0.18.1",
    "pa11y": "^9.0.0"
  },
  "dependencies": {
    "yaml": "^2.8.1"
  }
}
